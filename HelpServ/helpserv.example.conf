/*
 * Example configuration file for HelpServ.
 */

/*
 * First, create the service.
 */
service
{
  /*
   * The name of the HelpServ client.
   * If you change this value, you probably want to change the client directive in the configuration for the helpserv module too.
   */
  nick = "HelpServ"

  /*
   * The username of the HelpServ client.
   */
  user = "HelpServ"

  /*
   * The hostname of the HelpServ client.
   */
  host = "services.host"

  /*
   * The realname of the HelpServ client.
   */
  gecos = "Help Service"

  /*
   * The modes this client should use.
   * Do not modify this unless you know what you are doing.
   */
  #modes = "+o"

  /*
   * Optional channels to join.
   */
  channels = "@#services"
}

/*
 * Core HelpServ module.
 */
module
{
  name = "helpserv"

  /*
   * The name of the client that should be HelpServ.
   */
  client = "HelpServ"

  /*
   * Where to page staff.
   * - "globops" to send to oper globops/wallops
   * - "#channel" to send to a staff channel (HelpServ will join it)
   * - empty to disable paging
   */
  /* How HelpServ replies to users:
   * - notice (default)
   * - privmsg
   */
  reply_method = "privmsg"
  staff_target = "#services"

  /* Cooldowns (seconds) to prevent spam. */
  helpme_cooldown = 120
  request_cooldown = 60

  /* Memory-growth guard for cooldown tracking.
   * These maps track the last HELPME/REQUEST time per user/account key.
   * - cooldown_prune_interval: how often to prune (supports s/m/h/d/w)
   * - cooldown_prune_ttl: drop entries older than this (supports s/m/h/d/w)
   * - cooldown_prune_max_size: if the maps exceed this size, prune regardless of interval
   */
  cooldown_prune_interval = 1h
  cooldown_prune_ttl = 24h
  cooldown_prune_max_size = 5000

  /* If enabled, REQUEST also pages staff (default: yes). */
  page_on_request = yes

  /* Privilege required to change reply_method at runtime using NOTIFY. */
  notify_priv = "helpserv/admin"
  /* Privilege required for staff commands LIST/CLOSE. */
  ticket_priv = "helpserv/ticket"

  /* Automatically expire old tickets (default: 0 = disabled).
   * Supports suffixes: s/m/h/d/w (e.g. 7d)
   */
  ticket_expire = 0

  /*
   * Topics are optional; you can add as many as you like.
   */
  topic
  {
    name = "register"
    line { text = "To register your nickname: /msg NickServ REGISTER <password> <email>" }
    line { text = "Then follow the instructions sent to you." }
  }

  topic
  {
    name = "vhost"
    line { text = "To request a vhost: /msg HostServ REQUEST <ident@host>" }
    line { text = "To activate it: /msg HostServ ACTIVATE <ident@host>" }
  }
}

/* Admin command (hidden by default) */
command { service = "HelpServ"; name = "NOTIFY"; command = "helpserv/notify"; hide = true; }
/* Give it a help command. */
command { service = "HelpServ"; name = "HELP"; command = "generic/help"; }

/* HelpServ extra commands. */
command { service = "HelpServ"; name = "SEARCH"; command = "helpserv/search"; }
command { service = "HelpServ"; name = "STATS"; command = "helpserv/stats"; hide = true; }

/* Atheme-like escalation + tickets. */
command { service = "HelpServ"; name = "HELPME"; command = "helpserv/helpme"; }
command { service = "HelpServ"; name = "REQUEST"; command = "helpserv/request"; }
command { service = "HelpServ"; name = "CANCEL"; command = "helpserv/cancel"; }
command { service = "HelpServ"; name = "LIST"; command = "helpserv/list"; hide = true; }
command { service = "HelpServ"; name = "CLOSE"; command = "helpserv/close"; hide = true; }

/* Optional staff workflow commands (hidden by default). */
command { service = "HelpServ"; name = "VIEW"; command = "helpserv/view"; hide = true; }
command { service = "HelpServ"; name = "TAKE"; command = "helpserv/take"; hide = true; }
command { service = "HelpServ"; name = "ASSIGN"; command = "helpserv/assign"; hide = true; }
command { service = "HelpServ"; name = "NOTE"; command = "helpserv/note"; hide = true; }
command { service = "HelpServ"; name = "NEXT"; command = "helpserv/next"; hide = true; }
command { service = "HelpServ"; name = "PRIORITY"; command = "helpserv/priority"; hide = true; }
command { service = "HelpServ"; name = "WAIT"; command = "helpserv/wait"; hide = true; }
command { service = "HelpServ"; name = "UNWAIT"; command = "helpserv/unwait"; hide = true; }

/* Optional: add a short alias. */
command { service = "HelpServ"; name = "?"; command = "generic/help"; hide = true; }
