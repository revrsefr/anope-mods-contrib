/*
 * Example configuration file for ChanFix.
 *
 * ChanFix tracks ops in UNREGISTERED channels and can attempt to restore +o
 * after a takeover. Registered channels are skipped (ChanServ owns those).
 */

/*
 * First, create the service.
 */
service
{
  /* The name of the ChanFix client. */
  nick = "ChanFix"

  /* The username of the ChanFix client. */
  user = "ChanFix"

  /* The hostname of the ChanFix client. */
  host = "services.host"

  /* The realname of the ChanFix client. */
  gecos = "Channel Fix Service"

  /* Optional channels to join. */
  channels = "@#services"
}

/*
 * Core ChanFix module.
 */
module
{
  name = "chanfix"

  /* The name of the client that should be ChanFix. */
  client = "ChanFix"

  /* Privilege required to request fixes and set MARK/NOFIX. */
  admin_priv = "chanfix/admin"

  /* Privilege required to view all data (LIST/INFO/SCORES). */
  auspex_priv = "chanfix/auspex"

  /* If enabled, ChanFix will automatically attempt fixes for opless channels. */
  autofix = no

  /* If enabled, ChanFix will temporarily JOIN to apply modes and clear bans.
   * Some IRCds require the service to be in-channel to set modes.
   */
  join_to_fix = no

  /* Algorithm parameters. */
  op_threshold = 3
  min_fix_score = 12
  account_weight = 1.5
  initial_step = 0.70
  final_step = 0.30

  /* Time parameters (seconds). */
  retention_time = 2419200   /* 28 days */
  fix_time = 3600            /* threshold ramps over 1 hour */

  gather_interval = 300
  expire_interval = 3600
  autofix_interval = 60
  save_interval = 600

  /* How quickly scores decay in ExpireTick(). Higher => slower decay.
   * Default roughly matches Atheme's "672".
   */
  expire_divisor = 672
}

/* Public help */
command { service = "ChanFix"; name = "HELP"; command = "generic/help"; }

/* Operator/admin commands */
command { service = "ChanFix"; name = "CHANFIX"; command = "chanfix/chanfix"; hide = true; }
command { service = "ChanFix"; name = "SCORES"; command = "chanfix/scores"; hide = true; }
command { service = "ChanFix"; name = "INFO"; command = "chanfix/info"; hide = true; }
command { service = "ChanFix"; name = "LIST"; command = "chanfix/list"; hide = true; }
command { service = "ChanFix"; name = "MARK"; command = "chanfix/mark"; hide = true; }
command { service = "ChanFix"; name = "NOFIX"; command = "chanfix/nofix"; hide = true; }
